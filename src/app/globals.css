@tailwind base;
@tailwind components;
@tailwind utilities;

/* N27 Font Face – woff2 files in /public/fonts/n27/ */
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-thin-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-thin-webfont.woff") format("woff");
  font-weight: 100;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-extralight-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-extralight-webfont.woff") format("woff");
  font-weight: 200;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-light-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-light-webfont.woff") format("woff");
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-regular-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-regular-webfont.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-medium-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-medium-webfont.woff") format("woff");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-bold-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-bold-webfont.woff") format("woff");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
/* Italic variants */
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-regularitalic-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-regularitalic-webfont.woff") format("woff");
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-mediumitalic-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-mediumitalic-webfont.woff") format("woff");
  font-weight: 500;
  font-style: italic;
  font-display: swap;
}
@font-face {
  font-family: "N27";
  src: url("/fonts/n27/n27-bolditalic-webfont.woff2") format("woff2"),
       url("/fonts/n27/n27-bolditalic-webfont.woff") format("woff");
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

:root {
  --envrt-green: #1a3a2a;
  --envrt-green-light: #2d5a3f;
  --envrt-teal: #2aa198;
  --envrt-teal-light: #5bbdb6;
  --envrt-charcoal: #1e1e1e;
  --envrt-offwhite: #f8f7f4;
  --envrt-cream: #f0eeea;
  --envrt-muted: #9ca3a0;
}

* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: "N27", "Helvetica Neue", Helvetica, Arial, sans-serif;
  background-color: var(--envrt-offwhite);
  color: var(--envrt-charcoal);
  min-height: 100vh;
}

/* Scene card backgrounds */
.scene-card {
  @apply rounded-scene relative overflow-hidden;
  background: linear-gradient(
    135deg,
    #faf9f7 0%,
    #f6f5f2 100%
  );
  border: 1px solid rgba(0, 0, 0, 0.04);
}

.scene-card-dark {
  @apply rounded-scene relative overflow-hidden;
  background: linear-gradient(
    135deg,
    var(--envrt-green) 0%,
    #0f2219 100%
  );
  color: var(--envrt-offwhite);
}

/* Subtle noise texture overlay */
.noise-overlay::before {
  content: "";
  position: absolute;
  inset: 0;
  opacity: 0.03;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

/* ── Liquid Glass navbar (iOS 26 — bottom-edge refraction) ── */
.glass-nav {
  /* SVG bottom-edge refraction → heavy blur → colour boost.
     On browsers/devices that don't support url() in backdrop-filter,
     the @supports fallback below kicks in. */
  backdrop-filter:
    url(#liquid-glass-refract)
    blur(28px)
    saturate(1.8)
    brightness(1.08)
    contrast(1.05);
  -webkit-backdrop-filter:
    url(#liquid-glass-refract)
    blur(28px)
    saturate(1.8)
    brightness(1.08)
    contrast(1.05);

  /* Layered glass: bright specular top → translucent body */
  background:
    linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.55) 0%,
      rgba(255, 255, 255, 0.12) 45%,
      rgba(248, 247, 244, 0.22) 100%
    );

  /* Specular top rim + soft side/bottom borders */
  border-top: 1.5px solid rgba(255, 255, 255, 0.85);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  border-left: 1px solid rgba(255, 255, 255, 0.4);
  border-right: 1px solid rgba(255, 255, 255, 0.4);

  /* Inset specular + prismatic glow + depth */
  box-shadow:
    0 1.5px 0 0 rgba(255, 255, 255, 0.7) inset,
    0 -1px 0 0 rgba(0, 0, 0, 0.04) inset,
    0 0 20px -4px rgba(42, 161, 152, 0.15),
    0 0 40px -8px rgba(120, 100, 255, 0.08),
    0 8px 32px -4px rgba(0, 0, 0, 0.1),
    0 2px 6px 0 rgba(0, 0, 0, 0.04);

  /* Animated prismatic shimmer */
  animation: glass-shimmer 6s ease-in-out infinite;
}

/* Mobile: near-fully opaque navbar for readability */
@media (max-width: 767px) {
  .glass-nav {
    backdrop-filter: blur(32px) saturate(1.8) brightness(1.06);
    -webkit-backdrop-filter: blur(32px) saturate(1.8) brightness(1.06);
    background: rgba(248, 247, 244, 0.95);
  }
}

/* Fallback for browsers that don't support url() in backdrop-filter */
@supports not (backdrop-filter: url(#x) blur(1px)) {
  .glass-nav {
    backdrop-filter: blur(32px) saturate(1.8) brightness(1.08);
    -webkit-backdrop-filter: blur(32px) saturate(1.8) brightness(1.08);
  }
}

/* ── Mobile menu — higher opacity for readability ── */
.glass-nav-menu {
  backdrop-filter: blur(32px) saturate(1.6) brightness(1.04);
  -webkit-backdrop-filter: blur(32px) saturate(1.6) brightness(1.04);

  /* Near-fully opaque so menu items are easily readable */
  background: rgba(248, 247, 244, 0.97);

  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  border-left: 1px solid rgba(255, 255, 255, 0.3);
  border-right: 1px solid rgba(255, 255, 255, 0.3);

  box-shadow:
    0 1px 0 0 rgba(255, 255, 255, 0.5) inset,
    0 8px 32px -4px rgba(0, 0, 0, 0.1),
    0 2px 6px 0 rgba(0, 0, 0, 0.04);
}

/* Prismatic shimmer — cycles glow colours like light through a prism */
@keyframes glass-shimmer {
  0%, 100% {
    box-shadow:
      0 1.5px 0 0 rgba(255, 255, 255, 0.7) inset,
      0 -1px 0 0 rgba(0, 0, 0, 0.04) inset,
      0 0 20px -4px rgba(42, 161, 152, 0.15),
      0 0 40px -8px rgba(120, 100, 255, 0.08),
      0 8px 32px -4px rgba(0, 0, 0, 0.1),
      0 2px 6px 0 rgba(0, 0, 0, 0.04);
    border-top-color: rgba(255, 255, 255, 0.85);
  }
  33% {
    box-shadow:
      0 1.5px 0 0 rgba(255, 255, 255, 0.8) inset,
      0 -1px 0 0 rgba(0, 0, 0, 0.04) inset,
      0 0 24px -4px rgba(120, 100, 255, 0.18),
      0 0 44px -8px rgba(42, 161, 152, 0.1),
      0 8px 32px -4px rgba(0, 0, 0, 0.1),
      0 2px 6px 0 rgba(0, 0, 0, 0.04);
    border-top-color: rgba(220, 230, 255, 0.9);
  }
  66% {
    box-shadow:
      0 1.5px 0 0 rgba(255, 255, 255, 0.75) inset,
      0 -1px 0 0 rgba(0, 0, 0, 0.04) inset,
      0 0 22px -4px rgba(180, 120, 255, 0.14),
      0 0 42px -8px rgba(100, 200, 180, 0.09),
      0 8px 32px -4px rgba(0, 0, 0, 0.1),
      0 2px 6px 0 rgba(0, 0, 0, 0.04);
    border-top-color: rgba(240, 235, 255, 0.88);
  }
}

@media (prefers-reduced-motion: reduce) {
  .glass-nav {
    animation: none;
  }
}

/* Glitch text — matrix scramble is handled in JS (GlitchLink component) */
.glitch-text {
  position: relative;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-track {
  background: var(--envrt-offwhite);
}
::-webkit-scrollbar-thumb {
  background: var(--envrt-muted);
  border-radius: 3px;
}
